<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>T√©szta Kalkul√°tor 2.0 V</title>
    <style>
        :root { --primary: #d84315; --bg: #f4f4f4; --card: #ffffff; --text: #000000; --spec: #4527a0; --info: #0277bd; }
        body { font-family: 'Roboto', sans-serif; background: var(--bg); margin: 0; padding: 10px; color: #333; }
        .app-header { text-align: center; padding: 15px 0; background: var(--primary); color: white; border-radius: 0 0 15px 15px; margin: -10px -10px 20px -10px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .app-header h1 { margin: 0; font-size: 22px; text-transform: uppercase; letter-spacing: 1px; }
        .card { background: var(--card); padding: 15px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 15px; border: 1px solid #e0e0e0; }
        h2 { color: var(--primary); margin-top: 0; font-size: 18px; border-bottom: 2px solid #eee; padding-bottom: 5px; }
        .spec-h2 { color: var(--spec); }
        .input-group { margin-bottom: 10px; }
        label { display: block; font-size: 12px; font-weight: bold; margin-bottom: 4px; color: #555; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #bbb; border-radius: 6px; font-size: 16px; outline: none; box-sizing: border-box; color: #000; background: #fff; }
        .calc-btn { width: 100%; padding: 12px; border: none; border-radius: 6px; color: white; font-weight: bold; font-size: 15px; cursor: pointer; margin-top: 5px; text-transform: uppercase; }
        .btn-save { background: #2e7d32; margin-bottom: 15px; box-shadow: 0 3px 0 #1b5e20; }
        .btn-kovasz { background: #5d4037; } 
        .btn-eleszto { background: #1565c0; } 
        .btn-pizza { background: #bf360c; }
        .btn-spec { background: var(--spec); }
        .res { margin-top: 12px; background: #fffde7; padding: 12px; border-radius: 8px; border: 1px solid #ffd54f; display: none; }
        .res p { margin: 6px 0; font-size: 15px; display: flex; justify-content: space-between; color: #000; font-weight: 600; border-bottom: 1px solid #eee; }
        .total-box { background: #333; color: #fff; padding: 10px; border-radius: 6px; margin-top: 10px; text-align: center; font-weight: bold; }
        .pre-box { background: #e3f2fd; border-left: 4px solid #1976d2; padding: 8px; border-radius: 4px; margin-bottom: 10px; color: #0d47a1; font-weight: bold; font-size: 13px; }
        .info-box { background: #fff; border: 2px solid var(--info); padding: 12px; border-radius: 8px; margin-top: 15px; }
        #kisokos_text { background: #f9f9f9; border: 1px solid #000; font-size: 14px; font-weight: 900; line-height: 1.5; color: #000; height: 300px; resize: none; }
        .link-item { background: #fff; padding: 10px; border-radius: 6px; margin-bottom: 5px; display: flex; justify-content: space-between; border: 1px solid #ddd; align-items: center; }
    </style>
</head>
<body>

<div class="app-header"><h1>T√©szta Kalkul√°tor 2.0 V</h1></div>

<button class="calc-btn btn-save" onclick="saveData()">üíæ ADATOK MENT√âSE</button>

<div class="card" style="border: 2px solid var(--spec);">
    <h2 class="spec-h2">üß™ Speci√°lis Liszt & Kever≈ë</h2>
    <div class="input-group">
        <label>Feh√©rje (%) vagy W √©rt√©k:</label>
        <div style="display:flex; gap:8px;">
            <input type="number" id="s_prot" step="0.1" placeholder="Feh√©rje">
            <input type="number" id="s_w_input" placeholder="W √©rt√©k">
        </div>
        <button class="calc-btn btn-spec" onclick="calcSpec()">ELEMZ√âS</button>
        <div id="s_res" class="res" style="background:#f3e5f5; border-color:#b39ddb;"></div>
    </div>

    <div style="margin-top:15px; padding-top:15px; border-top: 1px dashed #ccc;">
        <label>Liszt Kever√©s (Pearson-n√©gyzet):</label>
        <div class="input-group"><input type="number" id="mix_total" placeholder="Teljes mennyis√©g (g)" value="600"></div>
        <div class="input-group"><input type="number" id="mix_target" placeholder="K√≠v√°nt c√©l W √©rt√©k"></div>
        <div style="display:flex; gap:8px;">
            <div style="flex:1;"><label>Liszt 1 W:</label><input type="number" id="mix_w1" placeholder="Gyeng√©bb"></div>
            <div style="flex:1;"><label>Liszt 2 W:</label><input type="number" id="mix_w2" placeholder="Er≈ësebb"></div>
        </div>
        <button class="calc-btn btn-spec" style="background:#311b92;" onclick="calcMix()">AR√ÅNYOK KISZ√ÅM√çT√ÅSA</button>
        <div id="mix_res" class="res" style="background:#f3e5f5; border-color:#b39ddb;"></div>
    </div>

    <div class="info-box">
        <h3 style="margin:0 0 10px 0; color:#000; font-size:16px; text-decoration:underline; text-align:center;">üìñ P√©k Kisokos & √ötmutat√≥</h3>
        <textarea id="kisokos_text">
W90-160: Gyenge (keksz)
W160-250: K√∂zepes (keny√©r, pizza)
W250-310: Er≈ës (hossz√∫ kel√©s)
9.8% Protein: ~W190-210 (Hidro: 65-68%)
Autol√≠zis: Er≈ës lisztn√©l 30-60 perc javasolt.

------------------

Hogyan m≈±k√∂dik a liszt W kalkul√°tor?
√çrd be a ‚ÄûTeljes lisztmennyis√©g‚Äù s√°vba azt a mennyis√©get, amellyel a t√©sztak√©sz√≠t√©s sor√°n sz√°molsz.
√çrd be a ‚ÄûK√≠v√°nt W √©rt√©k‚Äù s√°vba azt a W-t, amit el szeretn√©l √©rni.
√çrd be a ‚ÄûLiszt 1 W‚Äù √©s ‚ÄûLiszt 2 W‚Äù √©rt√©keket.
Kattints a sz√°m√≠t√°sra a pontos grammok√©rt.
        </textarea>
    </div>
</div>

<div class="card">
    <h2>ü•ñ Kov√°szos Keny√©r</h2>
    <div class="input-group"><label>√ñsszs√∫ly (g):</label><input type="number" id="k_target" value="1325"></div>
    <div class="input-group"><label>Hidrat√°l√°s (%):</label><input type="number" id="k_hyd" value="68"></div>
    <div class="input-group"><label>Krumpli (g):</label><input type="number" id="k_pot" value="150"></div>
    <div class="input-group"><label>K√ºls≈ë h≈ëm√©rs√©klet (¬∞C):</label><input type="number" id="k_temp" value="22"></div>
    <button class="calc-btn btn-kovasz" onclick="calcKovasz()">SZ√ÅM√çT√ÅS</button>
    <div id="k_res" class="res"></div>
</div>

<div class="card">
    <h2>üçû Kov√°szolt (Poolish)</h2>
    <div class="input-group"><label>√ñsszs√∫ly (g):</label><input type="number" id="e_target" value="1150"></div>
    <div class="input-group"><label>Hidrat√°l√°s (%):</label><input type="number" id="e_hyd" value="65"></div>
    <div class="input-group"><label>Krumpli (g):</label><input type="number" id="e_pot" value="150"></div>
    <div class="input-group"><label>S√≥ (%):</label><input type="number" id="e_salt" value="2.5"></div>
    <button class="calc-btn btn-eleszto" onclick="calcKovaszolt()">SZ√ÅM√çT√ÅS</button>
    <div id="e_res" class="res"></div>
</div>

<div class="card">
    <h2>üçï Pizza (Poolish)</h2>
    <div class="input-group"><label>Gomb√≥c (db):</label><input type="number" id="p_db" value="4"></div>
    <div class="input-group"><label>S√∫ly / gomb√≥c (g):</label><input type="number" id="p_suly" value="250"></div>
    <div class="input-group"><label>S√≥ (%):</label><input type="number" id="p_salt" value="2.5"></div>
    <div class="input-group"><label>Ol√≠vaolaj (g):</label><input type="number" id="p_oil" value="10"></div>
    <button class="calc-btn btn-pizza" onclick="calcPizza()">SZ√ÅM√çT√ÅS</button>
    <div id="p_res" class="res"></div>
</div>

<div class="card">
    <h2>üîó Recept Linkek</h2>
    <div id="link-list"></div>
    <input type="text" id="l_name" placeholder="Recept neve" style="margin-bottom:5px;">
    <input type="text" id="l_url" placeholder="URL">
    <button class="calc-btn" style="background:#555" onclick="addLink()">LIST√ÅHOZ AD√ÅS</button>
</div>

<script>
let links = JSON.parse(localStorage.getItem('v2_bakery_links')) || [];
function getN(id) { return parseFloat(document.getElementById(id).value) || 0; }

function calcSpec() {
    let prot = getN('s_prot'), w = getN('s_w_input'), res = document.getElementById('s_res');
    if (prot > 0 && w === 0) {
        if (prot < 9.5) w = 150; else if (prot <= 10.5) w = 210; else if (prot < 12.5) w = 290; else w = 380;
    }
    let hyd = (w < 220) ? "63-68%" : (w < 320) ? "68-75%" : "75-85%";
    res.innerHTML = `<p>Becs√ºlt er≈ë: <span>W ${w}</span></p><p>Aj√°nlott v√≠z: <span>${hyd}</span></p>`;
    res.style.display = 'block';
}

function calcMix() {
    let total = getN('mix_total'), target = getN('mix_target'), w1 = getN('mix_w1'), w2 = getN('mix_w2');
    let res = document.getElementById('mix_res');
    if (target <= Math.min(w1, w2) || target >= Math.max(w1, w2)) { alert("Hiba: C√©l W-nek a kett≈ë k√∂z√© kell esnie!"); return; }
    let q2 = total * (target - w1) / (w2 - w1);
    let q1 = total - q2;
    res.innerHTML = `<p>Liszt 1 (gyeng√©bb): <span>${Math.round(q1)}g</span></p><p>Liszt 2 (er≈ësebb): <span>${Math.round(q2)}g</span></p>`;
    res.style.display = 'block';
}

function calcKovasz() {
    let w = getN('k_target'), h = getN('k_hyd')/100, pot = getN('k_pot'), temp = getN('k_temp');
    let scale = w / (600 + 150 + pot + 15 + (600 * h));
    let t_viz = (temp > 25) ? "H≈±t≈ëhideg" : (temp < 20) ? "Langyos (30¬∞C)" : "Szobah≈ë";
    document.getElementById('k_res').innerHTML = `<p>Liszt: <span>${Math.round(600*scale)}g</span></p><p>V√≠z: <span>${Math.round(600*h*scale)}g</span></p><p>Kov√°sz: <span>${Math.round(150*scale)}g</span></p><p>Krumpli: <span>${Math.round(pot*scale)}g</span></p><p>S√≥: <span>${Math.round(15*scale)}g</span></p><p>H≈ëm. javaslat: <span>${t_viz}</span></p><div class="total-box">√ñsszesen: ${Math.round(w)}g</div>`;
    document.getElementById('k_res').style.display = 'block';
}

function calcKovaszolt() {
    let w = getN('e_target'), h = getN('e_hyd')/100, saltP = getN('e_salt')/100, pot = getN('e_pot');
    let totalBase = 600 + (600*h) + pot + (600*saltP) + 8 + 6 + 4.5; 
    let scale = w / totalBase;
    let baseL = 600 * scale; 
    let pL = baseL * 0.33;
    document.getElementById('e_res').innerHTML = `<div class="pre-box">POOLISH: ${Math.round(pL)}g L | ${Math.round(pL)}g V | 2g √âl</div><p>Liszt (marad√©k): <span>${Math.round(baseL - pL)}g</span></p><p>V√≠z (marad√©k): <span>${Math.round((baseL*h) - pL)}g</span></p><p>Krumpli: <span>${Math.round(pot*scale)}g</span></p><p>S√≥: <span>${Math.round(baseL*saltP)}g</span></p><p>Zs√≠r: 8g | Cukor: 6g | √âl: 2.5g</p><div class="total-box">√ñsszesen: ${Math.round(w)}g</div>`;
    document.getElementById('e_res').style.display = 'block';
}

function calcPizza() {
    let db = getN('p_db'), s = getN('p_suly'), saltP = getN('p_salt')/100, oil = getN('p_oil');
    let totalW = db * s;
    // Liszt sz√°m√≠t√°s: (√ñsszs√∫ly - Olaj - Dagaszt√°si √©leszt≈ë) / (1 + Hidro + S√≥%)
    let tL = (totalW - oil - 1) / (1 + 0.65 + saltP);
    let pL = tL * 0.33;
    document.getElementById('p_res').innerHTML = `<div class="pre-box">POOLISH: ${Math.round(pL)}g L | ${Math.round(pL)}g V | 2g √âl</div><p>Liszt (marad√©k): <span>${Math.round(tL-pL)}g</span></p><p>V√≠z (marad√©k): <span>${Math.round((tL*0.65)-pL)}g</span></p><p>S√≥: <span>${Math.round(tL*saltP)}g</span></p><p>Ol√≠vaolaj: <span>${oil}g</span></p><p>Dagaszt√°shoz √©leszt≈ë: <span>1g</span></p><div class="total-box">√ñsszesen: ${Math.round(totalW)}g</div>`;
    document.getElementById('p_res').style.display = 'block';
}

function saveData() {
    document.querySelectorAll('input:not([id^="l_"])').forEach(i => localStorage.setItem('v2_bakery_'+i.id, i.value));
    localStorage.setItem('v2_bakery_kisokos', document.getElementById('kisokos_text').value);
    localStorage.setItem('v2_bakery_links', JSON.stringify(links));
    alert('Adatok elmentve!');
}

function loadData() {
    document.querySelectorAll('input:not([id^="l_"])').forEach(i => {
        let v = localStorage.getItem('v2_bakery_'+i.id); if(v) i.value = v;
    });
    let k = localStorage.getItem('v2_bakery_kisokos'); if(k) document.getElementById('kisokos_text').value = k;
    renderLinks();
}

function addLink() {
    let n = document.getElementById('l_name').value, u = document.getElementById('l_url').value;
    if(n && u) { links.push({n, u: u.startsWith('http') ? u : 'https://' + u}); renderLinks(); }
}

function renderLinks() {
    document.getElementById('link-list').innerHTML = links.map((l, i) => `<div class="link-item"><a href="${l.u}" target="_blank">üì∫ ${l.n}</a><span onclick="links.splice(${i},1);renderLinks()" style="color:red;font-weight:bold;cursor:pointer">X</span></div>`).join('');
}
window.onload = loadData;
</script>
</body>
</html>
